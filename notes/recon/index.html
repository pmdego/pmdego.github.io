<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>
      Recon | PMD â€¢ Notes
    </title>

    <!-- Preload áº£nh cursor Ä‘á»ƒ load nhanh -->
    <link rel="preload" href="/assets/images/cursor-normal-32.png" as="image">
    <link rel="preload" href="/assets/images/cursor-hover-32.png" as="image">
    <link rel="preload" href="/assets/images/cursor-normal-48.png" as="image">
    <link rel="preload" href="/assets/images/cursor-hover-48.png" as="image">

    <!-- CSS theme chÃ­nh -->
    <link
      rel="stylesheet"
      href="/assets/css/style.css?v="
    />

    <!-- ThÃªm CSS cho Portfolio -->
    <link rel="stylesheet" href="/assets/css/portfolio.css">

    <!-- Fallback minimal náº¿u theme lá»—i -->
    <style>
      html, body { background:#0b0b0b; color:#eaeaea; margin:0; padding:0; }
      body {
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
                     "Liberation Mono","Courier New", monospace;
      }
      main img, .markdown-body img,
      main svg, .markdown-body svg,
      main canvas, .markdown-body canvas {
        max-width:100%; height:auto; display:block;
      }
      main, .markdown-body, main h1, main h2, main h3 {
        overflow-wrap:anywhere; word-break:break-word;
      }
      main pre, .markdown-body pre {
        overflow-x:auto; white-space:pre; -webkit-overflow-scrolling:touch;
      }
      main table, .markdown-body table {
        display:block; width:100%; overflow-x:auto;
      }
    </style>

    <script>
  (function () {
    function setFav(emoji) {
      let link = document.querySelector(
        "link#dynamic-favicon[rel='icon']"
      );
      if (!link) {
        link = document.createElement("link");
        link.id = "dynamic-favicon";
        link.rel = "icon";
        link.type = "image/svg+xml";
        document.head.appendChild(link);
      }

      const svg =
        "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'>" +
        "<text x='50' y='70' text-anchor='middle' font-size='90'>" +
        emoji +
        "</text>" +
        "</svg>";

      // NÃ© cache
      link.href =
        "data:image/svg+xml," +
        encodeURIComponent(svg) +
        "#v=" +
        Date.now();
    }

    function pickEmojiFromH1() {
      const h1 = document.querySelector("main h1, h1");
      if (!h1) return null;
      const txt = h1.textContent || "";

      // Unicode property (browser má»›i)
      try {
        const m = txt.match(/\p{Extended_Pictographic}/u);
        if (m && m[0]) return m[0];
      } catch (e) {}

      // Fallback dáº£i thÆ°á»ng gáº·p
      const m2 = txt.match(
        /[\u{1F300}-\u{1FAFF}\u{2600}-\u{26FF}]/u
      );
      return m2 ? m2[0] : null;
    }

    function init() {
      const emoji = pickEmojiFromH1() || "ğŸ›¡ï¸";
      setFav(emoji);
    }

    if (document.readyState === "loading") {
      document.addEventListener("DOMContentLoaded", init);
    } else {
      init();
    }
  })();
</script>

  </head>

  <body>
    <!-- Navbar chá»‰ hiá»‡n khi cÃ³ show_nav: true -->
    

    <!-- Ná»™i dung chÃ­nh -->
    <main class="page-wrap" style="max-width: 980px; margin: 2rem auto; padding: 0 1rem;">
      


<!-- Breadcrumb -->
<div class="breadcrumbs">
  <a href="/">ğŸ  Home</a>
  &nbsp;/&nbsp;
  <a href="/notes/">ğŸ““ Notes</a>
  
    &nbsp;/&nbsp;<span>Recon</span>
  
</div>

<main>
  
    <!-- TOC -->
    <nav id="toc" class="toc collapsed" aria-expanded="false" aria-controls="toc-body">
      <div class="toc-head" role="button" aria-expanded="false" tabindex="0">
        <span class="toc-caret">â–¸</span>
        <strong>Contents</strong>
      </div>
      <div id="toc-body" class="toc-body"></div>
    </nav>
  

  <hr />
<p>layout: notes
title: Recon â€“ Do thÃ¡m
â€”</p>
<h1 id="ï¸-recon--cÃ¡ch-thá»©c-hacker-tiáº¿p-cáº­n-má»™t-má»¥c-tiÃªu">ğŸ•µï¸ Recon â€“ CÃ¡ch thá»©c hacker tiáº¿p cáº­n má»™t má»¥c tiÃªu</h1>

<hr />

<h2 id="1-Ä‘áº·t-váº¥n-Ä‘á»-attack-surface-lÃ -gÃ¬">1) Äáº·t váº¥n Ä‘á»: Attack surface lÃ  gÃ¬?</h2>

<ul>
  <li><strong>Attack surface</strong> lÃ  vÃ¹ng mÃ  hacker cÃ³ thá»ƒ tÃ¡c Ä‘á»™ng vÃ  truyá»n <em>untrusted data</em> vÃ o.</li>
  <li>VÃ­ dá»¥: Attack surface cá»§a Viá»‡t Nam Ä‘á»‘i vá»›i Covid-19 chÃ­nh lÃ  <strong>cÃ¡c cá»­a kháº©u</strong> â€“ nÆ¡i báº¥t ká»³ ai tá»« bÃªn ngoÃ i cÃ³ thá»ƒ Ä‘i vÃ o.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>         +---------------------+
         |   Attack Surface    |
         | (XSS, SQLi, Fileâ€¦) |
         +---------------------+
</code></pre></div></div>

<ul>
  <li>Website/há»‡ thá»‘ng cÅ©ng chá»©a nhiá»u vÃ¹ng yáº¿u tÆ°Æ¡ng tá»±, nÆ¡i attacker cÃ³ thá»ƒ khai thÃ¡c.</li>
  <li>Pentester cáº§n cÃ³ cÃ¡i nhÃ¬n toÃ n cáº£nh Ä‘á»ƒ xÃ¡c Ä‘á»‹nh háº¿t cÃ¡c attack surface.</li>
  <li>Khi ká»¹ nÄƒng cÃ¢n báº±ng rá»“i, hacker â€œproâ€ sáº½ thi xem ai tÃ¬m ra <strong>attack surface má»›i</strong> nhanh hÆ¡n.</li>
</ul>

<p>ğŸ‘‰ Muá»‘n lÃ m Ä‘Æ°á»£c Ä‘iá»u nÃ y â†’ cáº§n <strong>ká»¹ nÄƒng Recon tá»‘t</strong>.</p>

<hr />

<h2 id="2-recon">2) Recon</h2>

<h3 id="21-recon-lÃ -gÃ¬">2.1 Recon lÃ  gÃ¬?</h3>

<ul>
  <li>Recon (<em>Reconnaissance</em>) = QuÃ¡ trÃ¬nh tÃ¬m ra <strong>attack surfaces</strong> â€“ nhá»¯ng con Ä‘Æ°á»ng má»›i Ä‘á»ƒ khai thÃ¡c báº£o máº­t.</li>
  <li>Ãp dá»¥ng trong cáº£ quÃ¢n sá»± láº«n tháº¿ giá»›i hacking.</li>
  <li>CÃ³ cÃ ng nhiá»u thÃ´ng tin â†’ cÃ ng dá»… lÃªn káº¿ hoáº¡ch táº¥n cÃ´ng hiá»‡u quáº£, nguy hiá»ƒm hÆ¡n.</li>
</ul>

<h3 id="22-lá»£i-Ã­ch-cá»§a-recon">2.2 Lá»£i Ã­ch cá»§a Recon</h3>

<p>âœ… Tiáº¿t kiá»‡m thá»i gian
âœ… XÃ¡c Ä‘á»‹nh cá»­a ngÃµ cá»§a <em>untrusted data</em>
âœ… Tháº¥y má»‘i liÃªn káº¿t giá»¯a cÃ¡c surface
âœ… CÃ³ thÃªm thÃ´ng tin Ä‘á»ƒ nÃ¢ng cao impact
âœ… Váº¡ch phÆ°Æ¡ng Ã¡n táº¥n cÃ´ng hiá»‡u quáº£</p>

<h3 id="23-tiÃªu-chÃ­">2.3 TiÃªu chÃ­</h3>

<p>Má»™t recon hiá»‡u quáº£ cáº§n thá»a mÃ£n 3 tiÃªu chÃ­:</p>

<ul>
  <li><strong>Nhanh</strong> â±: thá»i gian pentest cÃ³ háº¡n â†’ pháº£i láº¥y info nhanh.</li>
  <li><strong>ChÃ­nh xÃ¡c</strong> ğŸ¯: dá»¯ liá»‡u Ä‘Ãºng giÃºp tiáº¿t kiá»‡m thá»i gian &amp; tÄƒng hiá»‡u quáº£.</li>
  <li><strong>SÃ¢u/Rá»™ng</strong> ğŸŒŠ: khÃ´ng bá» sÃ³t surface nguy hiá»ƒm.</li>
</ul>

<p>ğŸ‘‰ GiÃ¡ trá»‹ thÃ´ng tin <strong>phá»¥ thuá»™c vÃ o cÃ¡ch sá»­ dá»¥ng</strong>.</p>

<hr />

<h3 id="24-key-idea-khi-do-thÃ¡m">2.4 Key idea khi do thÃ¡m</h3>

<p>Äá»ƒ thu tháº­p nhiá»u thÃ´ng tin nháº¥t cÃ³ thá»ƒ, ta cáº§n tráº£ lá»i 3 cÃ¢u há»i:</p>

<ul>
  <li><strong>What</strong> â€“ Cáº§n tÃ¬m gÃ¬?</li>
  <li><strong>Where</strong> â€“ TÃ¬m á»Ÿ Ä‘Ã¢u?</li>
  <li><strong>How</strong> â€“ TÃ¬m nhÆ° tháº¿ nÃ o?</li>
</ul>

<p>ğŸ’¡ <em>â€œThÃ´ng tin quÃ½ giÃ¡ nháº¥t luÃ´n báº¯t Ä‘áº§u tá»« cÃ¢u há»i khÃ´n ngoan.â€</em></p>

<h4 id="vÃ­-dá»¥-vui-há»i-crush-">VÃ­ dá»¥ vui (há»i crush ğŸ€)</h4>

<ul>
  <li>âŒ Há»i: <em>â€œEm cÃ³ ngÆ°á»i yÃªu chÆ°a?â€</em>â†’ CÃ¢u há»i Ä‘Ã³ng, tráº£ lá»i CÃ³/KhÃ´ng â†’ háº¿t phim.</li>
  <li>âœ… Há»i: <em>â€œCuá»‘i tuáº§n em hay Ä‘i chÆ¡i á»Ÿ Ä‘Ã¢u váº­y?â€</em>
â†’ Má»Ÿ ra thÃªm dá»¯ liá»‡u (sá»Ÿ thÃ­ch, thÃ³i quen, nhÃ³m báº¡nâ€¦)
â†’ CÃ³ thá»ƒ suy luáº­n ra nhiá»u thá»© hÆ¡n.</li>
</ul>

<p>ğŸ‘‰ Pentest cÅ©ng váº­y: Ä‘á»«ng chá»‰ test <em>yes/no</em>, hÃ£y Ä‘áº·t testcase má»Ÿ Ä‘á»ƒ thu tháº­p thÃªm dá»¯ liá»‡u.</p>

<hr />

<h2 id="3-recon-flow">3) Recon Flow</h2>

<p>Äá»ƒ quÃ¡ trÃ¬nh do thÃ¡m hiá»‡u quáº£, pentester cáº§n cÃ³ <strong>flow há»£p lÃ½</strong>.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[Domain] â†’ [Subdomain] â†’ [IP] â†’ [OS] â†’ [Ports/Services] â†’ [Web] â†’ { Tech stack | Directories | Params }
</code></pre></div></div>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Domain
â””â”€â”€ Subdomain
    â””â”€â”€ IP
        â””â”€â”€ OS
            â””â”€â”€ Ports/Services
                â””â”€â”€ Web
                    â”œâ”€â”€ Tech stack
                    â”œâ”€â”€ Directories
                    â””â”€â”€ Params
</code></pre></div></div>

<h3 id="giáº£i-thÃ­ch-vÃ¬-sao-flow-Ä‘i-nhÆ°-váº­y">Giáº£i thÃ­ch vÃ¬ sao flow Ä‘i nhÆ° váº­y:</h3>

<ul>
  <li><strong>Domain</strong>: Äiá»ƒm xuáº¥t phÃ¡t â€“ giá»‘ng nhÆ° Ä‘á»‹a chá»‰ cÃ´ng ty.</li>
  <li><strong>Subdomain</strong>: CÃ¡c chi nhÃ¡nh nhá» (support.company.com, dev.company.com).</li>
  <li><strong>IP</strong>: XÃ¡c Ä‘á»‹nh tá»a Ä‘á»™ tháº­t cá»§a server.</li>
  <li><strong>OS</strong>: Há»‡ Ä‘iá»u hÃ nh quyáº¿t Ä‘á»‹nh kiá»ƒu khai thÃ¡c (Linux, Windows).</li>
  <li><strong>Ports/Services</strong>: Cá»•ng má»Ÿ â†’ cÆ¡ há»™i vÃ o.</li>
  <li><strong>Web</strong>: Giao diá»‡n chÃ­nh.</li>
  <li><strong>Tech stack</strong>: Framework/ngÃ´n ngá»¯ â†’ loáº¡i bug phá»• biáº¿n.</li>
  <li><strong>Directories</strong>: Kho tÃ i liá»‡u bá»‹ bá» quÃªn (backup/, admin/).</li>
  <li><strong>Params</strong>: nÆ¡i Ä‘á»ƒ tiÃªm SQLi, XSS, RCE.</li>
</ul>

<p>ğŸ’¡ <strong>VÃ­ dá»¥ vui</strong>:</p>

<ul>
  <li>Domain = tÃªn tÃ²a nhÃ .</li>
  <li>Subdomain = cÃ¡c cá»•ng phá»¥.</li>
  <li>IP = tá»a Ä‘á»™ GPS.</li>
  <li>Ports = tá»«ng cá»­a phÃ²ng.</li>
  <li>Web = gáº·p lá»… tÃ¢n.</li>
  <li>Tech stack/Dirs/Params = kho lÆ°u trá»¯, phÃ²ng server, giáº¥y tá» bá»‹ bá» quÃªn.</li>
</ul>

<p>ğŸ‘‰ Flow = Ä‘i tá»« ngoÃ i vÃ o trong, rá»™ng Ä‘áº¿n háº¹p, Ä‘áº£m báº£o khÃ´ng bá» sÃ³t surface.</p>

<h3 id="31-lÆ°u-Ã½">3.1 LÆ°u Ã½</h3>

<ul>
  <li>Hiá»ƒu báº£n cháº¥t cÃ´ng cá»¥ quan trá»ng hÆ¡n spam tool.</li>
  <li>Biáº¿t Ä‘iá»ƒm máº¡nh/yáº¿u tá»«ng tool Ä‘á»ƒ káº¿t há»£p.</li>
  <li>Tool chá»‰ lÃ  phÆ°Æ¡ng tiá»‡n, tÆ° duy má»›i táº¡o ra káº¿t quáº£.</li>
</ul>

<h3 id="32-tÃ¬m-domainsubdomain">3.2 TÃ¬m Domain/Subdomain</h3>

<ul>
  <li>Giá»‘ng nhÆ° tÃ¬m chi nhÃ¡nh cÃ´ng ty â†’ chi nhÃ¡nh chÃ­nh báº£o máº­t tá»‘t, chi nhÃ¡nh phá»¥ dá»… há»Ÿ.</li>
  <li>CÃ´ng cá»¥ phá»• biáº¿n: <strong>Amass</strong> (OWASP).</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>amass enum <span class="nt">-d</span> &lt;<span class="nb">hostname</span><span class="o">&gt;</span>
</code></pre></div></div>

<ul>
  <li>CÃ³ thá»ƒ thÃªm API key vÃ o <code class="language-plaintext highlighter-rouge">config.ini</code> Ä‘á»ƒ káº¿t quáº£ phong phÃº hÆ¡n.</li>
</ul>

<h3 id="33-tÃ¬m-ipdáº£i-ip">3.3 TÃ¬m IP/Dáº£i IP</h3>

<ul>
  <li>Sau khi cÃ³ domain/subdomain â†’ tÃ¬m IP Ä‘á»ƒ cÃ³ thÃªm surface.</li>
  <li>Lá»‡nh cÆ¡ báº£n:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nslookup &lt;domain&gt;
</code></pre></div></div>

<ul>
  <li>Tips: IP liá»n ká» cÃ³ thá»ƒ cÃ¹ng thuá»™c há»‡ thá»‘ng target.</li>
</ul>

<h3 id="34-tÃ¬m-osportservices">3.4 TÃ¬m OS/Port/Services</h3>

<ul>
  <li>CÃ´ng cá»¥ â€œquá»‘c dÃ¢nâ€: <strong>Nmap</strong>.</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nmap <span class="nt">-sV</span> <span class="nt">-p1-65535</span> &lt;target&gt;
</code></pre></div></div>

<ul>
  <li>
    <p>Option hay:</p>

    <ul>
      <li><code class="language-plaintext highlighter-rouge">-sV</code> : detect version</li>
      <li><code class="language-plaintext highlighter-rouge">-O</code>  : detect OS</li>
      <li><code class="language-plaintext highlighter-rouge">-A</code>  : aggressive scan</li>
    </ul>
  </li>
  <li>
    <p>Káº¿t há»£p vá»›i <strong>exploit-db</strong> Ä‘á»ƒ check version cÃ³ bug.</p>
  </li>
</ul>

<h3 id="35-recon-web-services">3.5 Recon Web services</h3>

<p>Táº­p trung 3 máº£ng:</p>

<ul>
  <li><strong>Technology stack</strong>: dÃ¹ng Wappalyzer Ä‘á»ƒ xem ngÃ´n ngá»¯, framework.</li>
  <li><strong>Directory scan</strong>: dÃ¹ng <code class="language-plaintext highlighter-rouge">ffuf</code>, <code class="language-plaintext highlighter-rouge">gobuster</code> Ä‘á»ƒ tÃ¬m endpoint áº©n.</li>
  <li><strong>Parameter scan</strong>: dÃ¹ng <strong>Arjun</strong> Ä‘á»ƒ tÃ¬m param GET/POST áº©n.</li>
</ul>

<p>VÃ­ dá»¥ Arjun:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python3 arjun.py <span class="nt">-u</span> &lt;target_url&gt;
</code></pre></div></div>

<hr />

<h2 id="4-vÃ­-dá»¥-thá»±c-táº¿">4) VÃ­ dá»¥ thá»±c táº¿</h2>

<h3 id="-dead-cname">ğŸ•¸ Dead CNAME</h3>

<ul>
  <li><strong>NguyÃªn nhÃ¢n</strong>: domain trá» CNAME cÅ© nhÆ°ng record Ä‘Ã£ xoÃ¡.</li>
  <li><strong>Khai thÃ¡c</strong>: tÃ¬m hostname láº¡ â†’ chiáº¿m subdomain.</li>
  <li><strong>Háº­u quáº£</strong>: upload webshell, chiáº¿m server.</li>
  <li><strong>BÃ i há»c</strong>: tÆ°á»Ÿng tÆ°á»£ng sÃ¡ng táº¡o, khÃ´ng cáº§n kiáº¿n thá»©c quÃ¡ cao siÃªu.</li>
</ul>

<hr />

<h3 id="-devzip">ğŸ“¦ dev.zip</h3>

<ul>
  <li><strong>NguyÃªn nhÃ¢n</strong>: dev Ä‘á»ƒ quÃªn file <code class="language-plaintext highlighter-rouge">dev.zip</code> chá»©a source.</li>
  <li><strong>Khai thÃ¡c</strong>: scan directory, tÃ¬m tháº¥y file.</li>
  <li><strong>Háº­u quáº£</strong>: lá»™ 65k file + SECRET/API key.</li>
  <li><strong>BÃ i há»c</strong>: bug Ä‘Æ¡n giáº£n, reward cao.</li>
</ul>

<hr />

<h2 id="5-tham-kháº£o">5) Tham kháº£o</h2>

<ul>
  <li><a href="https://github.com/OWASP/Amass">Amass â€“ OWASP</a></li>
  <li><a href="https://github.com/ffuf/ffuf">ffuf â€“ fuzzing tool</a></li>
  <li><a href="https://github.com/projectdiscovery/katana">katana â€“ crawler</a></li>
  <li><a href="https://github.com/s0md3v/Arjun">arjun â€“ param scanner</a></li>
  <li><a href="https://www.exploit-db.com">exploit-db</a></li>
  <li><a href="https://github.com/danielmiessler/SecLists">SecLists wordlists</a></li>
</ul>

</main>


  <!-- Back -->
  <p style="margin-top: 2rem; text-align: center;">
    <a href="/notes/" class="back-notes">â¬… Back to Notes</a>
  </p>


<!-- ===== Shared Styles (no Liquid inside) ===== -->
<style>
  :root{
    --bar-h: 48px;
    --btn-w: 78px; --btn-h: 112px; --btn-right: 22px; --btn-bottom: 22px;
  }
  @media (max-width:480px){
    :root{ --btn-w:66px; --btn-h:98px; --btn-right:16px; --btn-bottom:16px; }
  }

  /* Breadcrumb */
  .breadcrumbs{
    position: sticky; top: 0; z-index: 1000;
    display: inline-flex; align-items: center; gap: .4rem;
    padding: .4rem .8rem; margin: .75rem 0 1rem;
    background:#111; border:1px solid #0f0; border-radius:9999px;
    box-shadow:0 0 6px rgba(0,255,0,.25); max-width:100%; overflow:auto;
  }
  .breadcrumbs a{ color:#4af; text-decoration:none; font-weight:600; }
  .breadcrumbs span{ color:#fff; font-weight:700; }

  main h2, main h3{ scroll-margin-top: calc(var(--bar-h) + 12px); }

  /* TOC */
  .toc{
    border-left:3px solid #6f6; margin:.5rem 0 1.2rem; background:#0b0b0b;
    border-radius:8px; box-shadow:0 0 6px rgba(0,255,0,.15); overflow:hidden;
  }
  .toc-head{ display:flex; align-items:center; gap:.5rem; padding:.55rem .9rem; cursor:pointer; user-select:none; }
  .toc-caret{ transition: transform .2s; }
  .toc[aria-expanded="true"] .toc-caret,.toc:not(.collapsed) .toc-caret{ transform: rotate(90deg); }
  .toc-body{ overflow:hidden; max-height:0; transition:max-height .25s, padding .25s; padding:0 .9rem; }
  .toc:not(.collapsed) .toc-body{ padding:.2rem .9rem .8rem; max-height:1200px; }
  .toc-body ul{ list-style:none; padding:0; margin:0; }
  .toc-body li{ margin:.2rem 0; }
  .toc-body li[data-level="3"]{ margin-left:1rem; }

  /* Back link pill */
  .back-notes{
    display:inline-block; padding:.6rem 1.2rem; border:1px solid #0f0; border-radius:9999px;
    color:#4af; text-decoration:none; font-weight:600; background:#111; box-shadow:0 0 6px rgba(0,255,0,.25);
    transition:all .25s;
  }
  .back-notes:hover{ background:#0f0; color:#111; }

  /* ===== Back-to-Top Cyberpunk (NO progress inside) ===== */
  #backTop{
    position: fixed; right: var(--btn-right); bottom: var(--btn-bottom); z-index: 9999;
    width: var(--btn-w); height: var(--btn-h); border-radius: 14px; cursor: pointer;
    background: linear-gradient(180deg,#0b0b0b 0%, #050505 100%);
    border: 2px solid transparent;
    box-shadow: 0 0 14px rgba(0,255,170,.45),
                0 0 26px rgba(0,140,255,.35),
                inset 0 0 12px rgba(0,255,170,.08);
    display: none; opacity:.98;
    animation: floatCard 3s ease-in-out infinite;
    transition: transform .25s, box-shadow .25s, opacity .25s, filter .25s;
  }
  #backTop::before{
    content:""; position:absolute; inset:-2px; border-radius:16px; z-index:-1;
    background:conic-gradient(from 0deg,#00ffa6,#00b7ff,#ff2bd6,#00ffa6);
    filter:blur(6px) saturate(1.4);
    transition:transform 1.5s linear, filter .5s;
  }
  #backTop:hover{
    box-shadow: 0 0 18px rgba(0,255,170,.65),
                0 0 36px rgba(0,140,255,.55),
                inset 0 0 14px rgba(0,255,170,.12);
    filter:brightness(1.06) contrast(1.08) saturate(1.12);
    animation:shake .45s cubic-bezier(.36,.07,.19,.97) both, floatCard 3s ease-in-out infinite .45s;
  }
  #backTop:hover::before{ transform: rotate(360deg); filter: hue-rotate(360deg) blur(6px) saturate(1.4); }
  #backTop .arrow{
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:26px; color:#fff; text-shadow:0 0 8px rgba(0,255,170,.9),0 0 16px rgba(0,140,255,.7);
    pointer-events:none;
  }

  /* ===== Mini progress ring (only one we keep) ===== */
  #scrollProgressMini{
    position: fixed;
    right: 22px; bottom: 150px; /* táº¡m; JS sáº½ Ä‘áº·t láº¡i theo #backTop */
    width: 52px; height: 52px;
    display: none; align-items: center; justify-content: center;
    border-radius: 50%; background: #0b0b0b;
    box-shadow: 0 0 8px rgba(0,255,170,.4), 0 0 16px rgba(0,140,255,.3);
    z-index: 9999;
  }
  #scrollProgressMini .ring{ position:absolute; inset:4px; transform: rotate(-90deg); }
  #scrollProgressMini .ring-bg{ fill:none; stroke:rgba(255,255,255,.18); stroke-width:4; }
  #scrollProgressMini .ring-fg{
    fill:none; stroke:#a3ff12; stroke-width:4; stroke-linecap:round;
    stroke-dasharray:1 120; stroke-dashoffset:0;
    filter:drop-shadow(0 0 4px rgba(163,255,18,.7));
  }
  #scrollProgressMini .percent{
    position:relative; font-size:.72rem; font-weight:800; color:#a3ff12; text-shadow:0 0 4px rgba(163,255,18,.6);
  }
  @media (max-width:480px){
    #scrollProgressMini{ width:46px; height:46px; }
    #scrollProgressMini .percent{ font-size:.68rem; }
    #scrollProgressMini .ring{ inset:3px; }
  }

  /* Animations */
  @keyframes floatCard{ 0%,100%{transform:translateY(0)} 50%{transform:translateY(-6px)} }
  @keyframes shake{ 10%,90%{transform:translate3d(-1px,0,0)} 20%,80%{transform:translate3d(2px,0,0)} 30%,50%,70%{transform:translate3d(-3px,0,0)} 40%,60%{transform:translate3d(3px,0,0)} }
</style><style>.page-header .project-name, .page-header .project-tagline{ display:none; }</style><!-- Back-to-Top card (no progress inside) -->
<button id="backTop" type="button" title="Back to top" aria-label="Back to top">
  <span class="arrow">â–²</span>
</button>

<!-- Mini progress ring above the card -->
<div id="scrollProgressMini" aria-hidden="true" title="Scroll progress">
  <svg class="ring" viewBox="0 0 44 44" width="44" height="44">
    <circle class="ring-bg" cx="22" cy="22" r="19.5"></circle>
    <circle class="ring-fg" cx="22" cy="22" r="19.5"></circle>
  </svg>
  <span class="percent">0%</span>
</div>

<script>
  /* Dedupe: remove duplicated includes if any */
  (function(){['#backTop','#scrollProgressMini'].forEach(sel=>{
    const nodes=document.querySelectorAll(sel); if(nodes.length>1) nodes.forEach((el,i)=>{ if(i>0) el.remove(); });
  });})();

  // Build TOC (unchanged)
  (function () {
    const toc = document.getElementById("toc"); if (!toc) return;
    const heads = [...document.querySelectorAll("main h2, main h3")];
    if (!heads.length) { toc.remove(); return; }
    heads.forEach(h => { if (!h.id) h.id = h.textContent.trim().toLowerCase().replace(/[^\w\- ]+/g,"").replace(/\s+/g,"-"); });
    const ul = document.createElement("ul");
    heads.forEach(h => { const li=document.createElement("li"); li.setAttribute("data-level", h.tagName==="H3"?"3":"2"); const a=document.createElement("a"); a.href="#"+h.id; a.textContent=h.textContent; li.appendChild(a); ul.appendChild(li); });
    toc.querySelector(".toc-body").appendChild(ul);
    const key="toc-state:"+location.pathname, preferOpen=matchMedia("(min-width:900px)").matches, saved=localStorage.getItem(key), startOpen=saved? saved==="open" : preferOpen;
    setExpanded(startOpen);
    function setExpanded(open){ toc.classList.toggle("collapsed", !open); toc.setAttribute("aria-expanded", String(open)); toc.querySelector(".toc-head").setAttribute("aria-expanded", String(open)); }
    function toggle(){ const open=toc.classList.contains("collapsed"); setExpanded(open); localStorage.setItem(key, open ? "open" : "closed"); }
    const head=toc.querySelector(".toc-head"); head.addEventListener("click", toggle);
    head.addEventListener("keydown", e => { if (e.key==="Enter"||e.key===" "){ e.preventDefault(); toggle(); }});
  })();

  // Back-to-Top + Mini progress ring (only mini shows progress)
  (function () {
    const btn  = document.getElementById("backTop");
    const mini = document.getElementById("scrollProgressMini");
    const miniTxt  = mini?.querySelector(".percent");
    const miniRing = mini?.querySelector(".ring-fg");
    if (!btn || !mini || !miniTxt || !miniRing) return;

    // prepare ring
    const r = parseFloat(miniRing.getAttribute("r") || "19.5");
    const C = 2 * Math.PI * r;
    miniRing.style.strokeDasharray = `${C} ${C}`;
    miniRing.style.strokeDashoffset = `${C}`;

    function setProgress(p){
      miniRing.style.strokeDashoffset = String(C - (p/100)*C);
      miniTxt.textContent = p + "%";
    }

    // place mini just above the card
    function placeMini(){
      const gap = 24;
      const rect = btn.getBoundingClientRect();
      mini.style.right  = (window.innerWidth  - rect.right) + "px";
      mini.style.bottom = (window.innerHeight - rect.top + gap) + "px";
    }

    function update(){
      const doc = document.documentElement;
      const max = doc.scrollHeight - doc.clientHeight;
      const sc  = max > 0 ? Math.round((doc.scrollTop / max) * 100) : 0;
      setProgress(sc);
      const show = sc > 3;
      btn.style.display  = show ? "block" : "none";
      mini.style.display = show ? "flex"  : "none";
      if (show) placeMini();
    }

    window.addEventListener("scroll", update, { passive:true });
    window.addEventListener("resize", () => { if (mini.style.display !== "none") placeMini(); });
    update();

    btn.addEventListener("click", () => window.scrollTo({ top: 0, behavior: "smooth" }));
  })();
</script>


    </main>

    <!-- Cursor CSS + JS (anti-flicker) -->
    <style>
  :root{
    --cursor-normal: url('/assets/images/cursor-normal-32.png') 4 4, auto;
    --cursor-hover:  url('/assets/images/cursor-hover-32.png') 4 4, auto;
  }

  /* Máº·c Ä‘á»‹nh: phá»§ custom cursor toÃ n trang (Æ°u tiÃªn cao) */
  html, body, * {
    cursor: var(--cursor-normal) !important;
  }

  /* Táº¥t cáº£ tráº¡ng thÃ¡i cá»§a link & vÃ¹ng clickable -> dÃ¹ng hover cursor */
  a, a *,
  a:link, a:link *,
  a:visited, a:visited *,
  a:hover, a:hover *,
  a:focus, a:focus *,
  a:active, a:active *,
  a:focus-visible, a:focus-visible *,
  button, button *,
  [role="button"], [role="button"] *,
  [onclick], [onclick] *,
  input[type="button"], input[type="submit"],
  label[for], summary {
    cursor: var(--cursor-hover) !important;
  }

  /* Khi Ä‘ang giá»¯ chuá»™t / Ä‘ang Ä‘iá»u hÆ°á»›ng: Ã©p toÃ n trang sang hover-cursor */
  html.is-mousedown *, html.is-mousedown *::before, html.is-mousedown *::after,
  html.is-mousedown svg, html.is-mousedown svg *,
  html.is-navigating *, html.is-navigating *::before, html.is-navigating *::after,
  html.is-navigating svg, html.is-navigating svg *{
    cursor: var(--cursor-hover) !important;
  }

  /* VÃ¹ng nháº­p liá»‡u giá»¯ I-beam (ká»ƒ cáº£ khi mousedown/navigating) */
  input, textarea, [contenteditable="true"]{
    cursor: text !important;
  }
  html.is-mousedown input,
  html.is-mousedown textarea,
  html.is-mousedown [contenteditable="true"],
  html.is-navigating input,
  html.is-navigating textarea,
  html.is-navigating [contenteditable="true"]{
    cursor: text !important;
  }

  /* Retina 2x: dÃ¹ng áº£nh 48px, hotspot 6,6 (sáº¯c nÃ©t) */
  @media (min-resolution: 2dppx), (-webkit-min-device-pixel-ratio: 2){
    :root{
      --cursor-normal: url('/assets/images/cursor-normal-48.png') 6 6, auto;
      --cursor-hover:  url('/assets/images/cursor-hover-48.png') 6 6, auto;
    }
  }

  /* Thiáº¿t bá»‹ cáº£m á»©ng: tráº£ vá» máº·c Ä‘á»‹nh */
  @media (pointer: coarse){
    html, body, *, *::before, *::after{
      cursor: auto !important;
    }
  }
</style>

<script>
  (function () {
    const root = document.documentElement;

    const addDown = () => root.classList.add('is-mousedown');
    const rmDown  = () => root.classList.remove('is-mousedown');
    const addNav  = () => root.classList.add('is-navigating');
    const rmNav   = () => root.classList.remove('is-navigating');

    /* DÃ¹ng capture Ä‘á»ƒ cháº¡y TRÆ¯á»šC khi UA Ã¡p :active */
    window.addEventListener('mousedown', addDown,   { passive: true, capture: true });
    window.addEventListener('pointerdown', addDown, { passive: true, capture: true });

    window.addEventListener('mouseup', rmDown,       { passive: true });
    window.addEventListener('pointerup', rmDown,     { passive: true });
    window.addEventListener('pointercancel', rmDown, { passive: true });
    window.addEventListener('dragend', rmDown,       { passive: true });

    /* Click link -> báº­t cá» Ä‘iá»u hÆ°á»›ng ngay.
       Náº¿u lÃ  SPA/preventDefault, gá»¡ cá» sau 200ms Ä‘á»ƒ trÃ¡nh káº¹t tráº¡ng thÃ¡i. */
    document.addEventListener('click', (e) => {
      const isLeft = (e.button === 0);
      const el = e.target.closest('a, [data-href]');
      if (!el || !isLeft) return;

      if ((el.tagName === 'A' && el.href) || el.hasAttribute('data-href')) {
        addNav();
        setTimeout(rmNav, 200);
      }
    }, { passive: true, capture: true });

    /* Khi sáº¯p rá»i trang thá»±c sá»± */
    window.addEventListener('beforeunload', addNav, { once: true });
    window.addEventListener('pagehide',     addNav, { once: true });

    /* Quay láº¡i tá»« bfcache: dá»n láº¡i cá» */
    window.addEventListener('pageshow', () => { rmDown(); rmNav(); }, { passive: true });
  })();
</script>

  </body>
</html>
